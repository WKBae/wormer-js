<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<title></title>

		<!-- Bootstrap -->
		<link href="css/bootstrap.min.css" rel="stylesheet">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
			<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
			<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->

		<link rel="stylesheet" href="css/dygraph.min.css">

		<style>
			.render {
				padding: 5px;
				border-radius: 3px;
				border: 1px solid #CCC;
				overflow: hidden;
			}
			.dygraph-legend {
				background: rgba(240, 240, 240, 0.5);
				padding: 5px;
				width: auto;
				border-radius: 3px;
			}
		</style>
	</head>
	<body>
		<div class="container-fluid" id="options">
			<div class="row">
				<div class="col-xs-12">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<h3 class="panel-title">설정</h3>
						</div>
						<div class="panel-body">
							<form>
								<div class="panel panel-default">
									<div class="panel-heading">
										<h3 class="panel-title">시뮬레이션 설정</h3>
									</div>
									<div class="panel-body row simulation">
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="worms-per-gen">세대당 개체 수</label>
											<input type="number" class="form-control" min="1" id="worms-per-gen" value="20">
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="preserved-worms">유지되는 상위 개체 수</label>
											<input type="number" class="form-control" min="0" id="preserved-worms" value="3">
										</div>
										<!--div class="form-group col-md-3 col-sm-6 col-xs-12"-->
											<input type="hidden" id="timestep" value="60">
										<!--/div-->
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="speed">시뮬레이션 속도</label>
											<div class="input-group">
												<input type="range" class="form-control" min="0" max="1" step="0.1" id="speed" value="0" size="10" oninput="speedOut.value=speed.value">
												<output class="input-group-addon" id="speedOut">0</output>
											</div>
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="until">한 세대가 끝날 때까지의 시간</label>
											<input type="number" class="form-control" min="0" id="until" value="15000">
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="end">종료할 세대</label>
											<input type="number" class="form-control" min="1" id="end" value="50">
										</div>
									</div>
								</div>
								<div class="panel panel-default">
									<div class="panel-heading">
										<h3 class="panel-title">개체 설정</h3>
									</div>
									<div class="panel-body row worm">
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="width">폭</label>
											<input type="number" class="form-control" min="0.1" step="0.1" id="width" value="10">
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="length">길이</label>
											<input type="number" class="form-control" min="0.1" step="0.1" id="length" value="100">
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="foldings">관절 수</label>
											<input type="number" class="form-control" min="1" id="foldings" value="8">
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="stiffness">유연성</label>
											<div class="input-group">
												<input type="range" class="form-control" min="0" max="1" step="0.05" id="stiffness" value="0.4" oninput="stiffnessOut.value=stiffness.value">
												<output class="input-group-addon" id="stiffnessOut">0.4</output>
											</div>
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="friction">마찰력</label>
											<div class="input-group">
												<input type="range" class="form-control" min="0" max="1" step="0.05" id="friction" value="0.1" oninput="frictionOut.value=friction.value">
												<output class="input-group-addon" id="frictionOut">0.1</output>
											</div>
										</div>
									</div>
								</div>
								<div class="panel panel-default">
									<div class="panel-heading">
										<div class="panel-title">유전자 설정</div>
									</div>
									<div class="panel-body row gene">
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="phases">유전자의 갯수</label>
											<input type="number" class="form-control" min="1" id="phases" value="128">
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="period">한 유전자가 유지되는 시간</label>
											<input type="number" class="form-control" min="1" id="period" value="5">
										</div>
										<div class="form-group col-md-3 col-sm-6 col-xs-12">
											<label for="mutation">돌연변이 확률</label>
											<div class="input-group">
												<input type="range" class="form-control" min="0" max="1" step="0.01" id="mutation" value="0.01" oninput="mutationOut.value=mutation.value">
												<output class="input-group-addon" id="mutationOut">0.01</output>
											</div>
										</div>
									</div>
								</div>
								<div class="form-group">
									<input type="checkbox" id="doRender" checked><label for="doRender"> 화면 그리기</label>
								</div>
								<input type="submit" class="btn btn-primary" id="start" value="시작"> <input type="reset" value="초기화" class="btn btn-default">
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>

		<div class="container-fluid" id="simulation" style="display: none">
			<div class="row">
				<div class="col-xs-12">
					<div class="panel panel-info">
						<div class="panel-heading">
							<h3 class="panel-title">Processing: Generation <span id="generation"></span></h3>
						</div>
						<div class="panel-body">
							<ul class="nav nav-tabs">
								<li class="active"><a href="#tab-status" data-toggle="tab">Status</a></li>
								<li><a href="#tab-history" data-toggle="tab">History</a></li>
							</ul>

							<div class="tab-content">
								<div class="tab-pane active" id="tab-status">
									<div class="page-header">
										<h3>Simulation status</h3>
									</div>
									<dl class="dl-horizontal">
										<dt>Overall time spent</dt>
										<dd id="overall-time"></dd>
										<dt>Total simulation time</dt>
										<dd id="simulation-time"></dd>
									</dl>

									<div class="page-header">
										<h3>Running simulations</h3>
									</div>
									<div class="row" id="renders"></div>
								</div>
								<div class="tab-pane" id="tab-history">
									<div class="row">
										<div class="col-sm-6 col-xs-12">
											<div id="historyChart" style="width:100%"></div>
											<button class="btn btn-link" id="export-graph">Export CSV...</button>
										</div>
										<div class="col-sm-6 col-xs-12">
											<div class="page-header">
												<h3>Previous generation</h3>
											</div>
											<dl class="dl-horizontal">
												<dt>Maximum fitness</dt>
												<dd id="max-fitness"></dd>
												<dt>Average fitness</dt>
												<dd id="avg-fitness"></dd>
											</dl>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

		<script src="js/jquery-3.1.1.min.js"></script>
		<script src="js/matter.min.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/dygraph.min.js"></script>
		<script src="js/wormer.js"></script>
	</body>
</html>
